import{atom as t}from"jotai/vanilla";import*as e from"optics-ts";const n=(t,e,n)=>(e.has(n)?e:e.set(n,t())).get(n),o=new WeakMap;function r(r,a){return((i,c,p)=>{const f=n(()=>new WeakMap,o,c);return n(()=>{const n=a(e.optic());return t(t=>{const e=t(r);return e instanceof Promise?e.then(t=>s(n,t)):s(n,e)},(t,o,s)=>{const a="function"==typeof s?e.modify(n)(s):e.set(n)(s),i=t(r);return o(r,i instanceof Promise?i.then(a):a(i))})},f,p)})(0,r,a)}const s=(t,n)=>"Traversal"===t._tag?e.collect(t)(n):"Prism"===t._tag?e.preview(t)(n):e.get(t)(n);export{r as focusAtom};
//# sourceMappingURL=index.modern.mjs.map
