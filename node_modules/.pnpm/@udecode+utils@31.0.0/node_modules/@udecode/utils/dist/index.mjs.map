{"version":3,"sources":["../src/environment.ts","../src/escapeRegexp.ts","../src/findHtmlParentElement.ts","../src/getHandler.ts","../src/hexToBase64.ts","../src/isUrl.ts","../src/mergeProps.ts","../src/sanitizeUrl.ts","../src/type-utils.ts"],"sourcesContent":["export const IS_APPLE =\n  typeof navigator !== 'undefined' && /Mac OS X/.test(navigator.userAgent);\n","export const escapeRegExp = (text: string) => {\n  return text.replaceAll(/[#$()*+,.?[\\\\\\]^s{|}-]/g, '\\\\$&');\n};\n","export const findHtmlParentElement = (\n  el: HTMLElement | null,\n  nodeName: string\n): HTMLElement | null => {\n  if (!el || el.nodeName === nodeName) {\n    return el;\n  }\n\n  return findHtmlParentElement(el.parentElement, nodeName);\n};\n","/**\n * Call a handler if defined\n */\nexport const getHandler =\n  <T extends (...args: any) => any>(cb?: T, ...args: Parameters<T>) =>\n  () => {\n    cb?.(...(args as any));\n  };\n","export const hexToBase64 = (hex: string): string => {\n  const hexPairs = hex.match(/\\w{2}/g) || [];\n  const binary = hexPairs.map((hexPair) =>\n    String.fromCodePoint(Number.parseInt(hexPair, 16))\n  );\n  return btoa(binary.join(''));\n};\n","/**\n * RegExps.\n * A URL must match #1 and then at least one of #2/#3.\n * Use two levels of REs to avoid REDOS.\n */\n\nconst protocolAndDomainRE = /^(?:\\w+:)?\\/\\/(\\S+)$/;\nconst emailLintRE = /mailto:([^?\\\\]+)/;\n\nconst localhostDomainRE = /^localhost[\\d:?]*(?:[^\\d:?]\\S*)?$/;\nconst nonLocalhostDomainRE = /^[^\\s.]+\\.\\S{2,}$/;\n\n/**\n * Loosely validate a URL `string`.\n */\nexport const isUrl = (string: any) => {\n  if (typeof string !== 'string') {\n    return false;\n  }\n\n  const generalMatch = string.match(protocolAndDomainRE);\n  const emailLinkMatch = string.match(emailLintRE);\n\n  const match = generalMatch || emailLinkMatch;\n  if (!match) {\n    return false;\n  }\n\n  const everythingAfterProtocol = match[1];\n  if (!everythingAfterProtocol) {\n    return false;\n  }\n\n  try {\n    new URL(string);\n  } catch {\n    return false;\n  }\n\n  return (\n    localhostDomainRE.test(everythingAfterProtocol) ||\n    nonLocalhostDomainRE.test(everythingAfterProtocol)\n  );\n};\n","/**\n * Merge props by composing handlers.\n */\nexport const mergeProps = <T>(\n  props?: T,\n  overrideProps?: T,\n  {\n    handlerKeys,\n    handlerQuery = (key) => key.indexOf('on') === 0,\n  }: {\n    /**\n     * The keys of the handlers to merge.\n     */\n    handlerKeys?: string[];\n    /**\n     * A function that returns true if it's a handler to merge.\n     *\n     * Default: keys having `on` prefix.\n     */\n    handlerQuery?: ((key: string) => boolean) | null;\n  } = {}\n): T => {\n  const map = new Map<string, Array<(...args: unknown[]) => void>>();\n\n  const acc: any = {};\n\n  const mapProps = (_props?: T) => {\n    if (!_props) return;\n\n    Object.entries(_props).forEach(([key, value]) => {\n      if (\n        (!handlerKeys || handlerKeys.includes(key)) &&\n        (!handlerQuery || handlerQuery(key)) &&\n        typeof value === 'function'\n      ) {\n        if (!map.has(key)) {\n          map.set(key, []);\n        }\n\n        map.get(key)?.push(value as any);\n\n        acc[key] = (...args: unknown[]) => {\n          map.get(key)?.forEach((fn) => fn(...args));\n        };\n      } else {\n        acc[key] = value;\n      }\n    });\n  };\n\n  mapProps(props);\n  mapProps(overrideProps);\n\n  return acc;\n};\n","export interface SanitizeUrlOptions {\n  allowedSchemes?: string[];\n  permitInvalid?: boolean;\n}\n\nexport const sanitizeUrl = (\n  url: string | undefined,\n  { allowedSchemes, permitInvalid = false }: SanitizeUrlOptions\n): string | null => {\n  if (!url) return null;\n\n  let parsedUrl: URL | null = null;\n\n  try {\n    parsedUrl = new URL(url);\n  } catch {\n    return permitInvalid ? url : null;\n  }\n\n  if (\n    allowedSchemes &&\n    !allowedSchemes.includes(parsedUrl.protocol.slice(0, -1))\n  ) {\n    return null;\n  }\n\n  return parsedUrl.href;\n};\n","/**\n * @returns whether the provided parameter is undefined.\n */\nexport const isUndefined = (obj: any): obj is undefined => obj === undefined;\n\nexport const isNull = (obj: any): obj is null => obj === null;\n\n/**\n * @returns whether the provided parameter is undefined or null.\n */\nexport const isUndefinedOrNull = (obj: any): obj is undefined | null =>\n  isUndefined(obj) || isNull(obj);\n\n/**\n * @returns whether the provided parameter is defined.\n */\nexport const isDefined = <T>(arg: T | null | undefined): arg is T =>\n  !isUndefinedOrNull(arg);\n"],"mappings":"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","names":["_a"]}