{"version":3,"sources":["../src/heading/constants.ts","../src/heading/createHeadingPlugin.ts","../src/toc/createTocPlugin.ts","../src/toc/hooks/useTocElement.ts","../src/utils/checkIn.ts","../src/utils/heightToTop.ts","../src/utils/isHeading.ts","../src/utils/internal/getHeadingList.ts","../src/toc/tocSideBar/useContentController.ts","../src/toc/tocSideBar/useContentObserver.ts","../src/toc/tocSideBar/useTocController.ts","../src/toc/tocSideBar/useTocObserver.ts","../src/toc/tocSideBar/useTocSideBarState.ts","../src/toc/transforms/insertToc.ts"],"sourcesContent":["export const ELEMENT_H1 = 'h1';\n\nexport const ELEMENT_H2 = 'h2';\n\nexport const ELEMENT_H3 = 'h3';\n\nexport const ELEMENT_H4 = 'h4';\n\nexport const ELEMENT_H5 = 'h5';\n\nexport const ELEMENT_H6 = 'h6';\n\nexport const KEYS_HEADING = [\n  ELEMENT_H1,\n  ELEMENT_H2,\n  ELEMENT_H3,\n  ELEMENT_H4,\n  ELEMENT_H5,\n  ELEMENT_H6,\n];\n","import {\n  type PlatePlugin,\n  createPluginFactory,\n  onKeyDownToggleElement,\n} from '@udecode/plate-common/server';\n\nimport type { HeadingPlugin, HeadingsPlugin } from './types';\n\nimport { KEYS_HEADING } from './constants';\n\nexport const KEY_HEADING = 'heading';\n\n/** Enables support for headings with configurable levels (from 1 to 6). */\nexport const createHeadingPlugin = createPluginFactory<HeadingsPlugin>({\n  key: KEY_HEADING,\n  options: {\n    levels: [1, 2, 3, 4, 5, 6],\n  },\n  then: (editor, { options: { levels } = {} }) => {\n    const plugins: PlatePlugin<HeadingPlugin>[] = [];\n\n    const headingLevels = Array.isArray(levels)\n      ? levels\n      : Array.from({ length: levels || 6 }, (_, i) => i + 1);\n\n    headingLevels.forEach((level) => {\n      const key = KEYS_HEADING[level - 1];\n\n      const plugin: PlatePlugin<HeadingPlugin> = {\n        deserializeHtml: {\n          rules: [\n            {\n              validNodeName: `H${level}`,\n            },\n          ],\n        },\n        handlers: {\n          onKeyDown: onKeyDownToggleElement,\n        },\n        isElement: true,\n        key,\n        options: {},\n      };\n\n      if (level < 4) {\n        plugin.options!.hotkey = [`mod+opt+${level}`, `mod+shift+${level}`];\n      }\n\n      plugins.push(plugin);\n    });\n\n    return {\n      plugins,\n    };\n  },\n});\n","import {\n  type PlateEditor,\n  type Value,\n  createPluginFactory,\n} from '@udecode/plate-common';\n\nimport type { Heading } from './types';\n\nexport const ELEMENT_TOC = 'toc';\n\nexport interface TocPlugin {\n  queryHeading?: <V extends Value = Value>(editor: PlateEditor<V>) => Heading[];\n}\n\nexport const createTocPlugin = createPluginFactory<TocPlugin>({\n  isElement: true,\n  isVoid: true,\n  key: ELEMENT_TOC,\n});\n","import React, { useEffect } from 'react';\n\nimport {\n  addSelectedRow,\n  getNode,\n  toDOMNode,\n  useEditorRef,\n  useEditorSelector,\n} from '@udecode/plate-common';\n\nimport type { Heading } from '../types';\n\nimport { heightToTop } from '../../utils';\nimport { getHeadingList } from '../../utils/internal/getHeadingList';\n\nexport type useTocElementStateProps = {\n  isScroll: boolean;\n  scrollContainerSelector?: string;\n  topOffset: number;\n};\n\nexport const useTocElementState = ({\n  isScroll,\n  scrollContainerSelector,\n  topOffset,\n}: useTocElementStateProps) => {\n  const editor = useEditorRef();\n\n  const headingList = useEditorSelector(getHeadingList, []);\n\n  const containerRef = React.useRef<HTMLElement | null>(null);\n\n  useEffect(() => {\n    const container = scrollContainerSelector\n      ? document.querySelector(scrollContainerSelector)\n      : toDOMNode(editor, editor)!;\n\n    if (!container) return;\n\n    containerRef.current = container as HTMLElement;\n\n    return () => {\n      containerRef.current = null;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const onContentScroll = React.useCallback(\n    (el: HTMLElement, id: string, behavior: ScrollBehavior = 'instant') => {\n      if (!containerRef.current) return;\n      if (isScroll) {\n        containerRef.current?.scrollTo({\n          behavior,\n          top: heightToTop(el, containerRef as any) - topOffset,\n        });\n      } else {\n        const top = heightToTop(el) - topOffset;\n        window.scrollTo({ behavior, top });\n      }\n\n      setTimeout(() => {\n        addSelectedRow(editor, id);\n      }, 0);\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [isScroll, topOffset]\n  );\n\n  return { editor, headingList, onContentScroll };\n};\n\nexport const useTocElement = ({\n  editor,\n  onContentScroll,\n}: ReturnType<typeof useTocElementState>) => {\n  return {\n    props: {\n      onClick: (\n        e: React.MouseEvent<HTMLElement, globalThis.MouseEvent>,\n        item: Heading,\n        behavior: ScrollBehavior\n      ) => {\n        e.preventDefault();\n        const { id, path } = item;\n        const node = getNode(editor, path);\n\n        if (!node) return;\n\n        const el = toDOMNode(editor, node);\n\n        if (!el) return;\n\n        onContentScroll(el, id, behavior);\n      },\n    },\n  };\n};\n","export function checkIn(\n  e: React.MouseEvent<HTMLElement, globalThis.MouseEvent>\n) {\n  const event = window.event as unknown as React.MouseEvent<\n    HTMLElement,\n    globalThis.MouseEvent\n  >;\n  const x = Number(event.clientX); // 鼠标相对屏幕横坐标\n  const y = Number(event.clientY); // 鼠标相对屏幕纵坐标\n\n  const ele = e.target as HTMLElement;\n  const div_x = Number(ele.getBoundingClientRect().left); // 相对屏幕的横坐标\n  const div_x_width = Number(\n    ele.getBoundingClientRect().left + ele.clientWidth\n  ); // 相对屏幕的横坐标+width\n\n  const div_y = Number(ele.getBoundingClientRect().top); // 相对屏幕的纵坐标\n  const div_y_height = Number(\n    ele.getBoundingClientRect().top + ele.clientHeight\n  ); // 相对屏幕的纵坐标+height\n\n  if (x > div_x && x < div_x_width && y > div_y && y < div_y_height) {\n    return true;\n  }\n\n  return false;\n}\n","import type React from 'react';\n\nexport const heightToTop = (\n  ele: HTMLElement,\n  editorContentRef?: React.RefObject<HTMLDivElement>\n) => {\n  const root = editorContentRef ? editorContentRef.current : document.body;\n\n  if (!root || !ele) return 0;\n\n  const containerRect = root.getBoundingClientRect();\n  const elementRect = ele.getBoundingClientRect();\n\n  const scrollY = root.scrollTop;\n  const absoluteElementTop = elementRect.top + scrollY - containerRect.top;\n\n  return absoluteElementTop;\n};\n","import type { ENode, Value } from '@udecode/plate-common';\n\nimport { KEYS_HEADING } from '../heading';\n\nexport const isHeading = (node: ENode<Value>) => {\n  return node.type && KEYS_HEADING.includes(node.type as string);\n};\n","import {\n  type PlateEditor,\n  type TElement,\n  type Value,\n  getNodeEntries,\n  getNodeString,\n  getPluginOptions,\n} from '@udecode/plate-common';\n\nimport {\n  ELEMENT_H1,\n  ELEMENT_H2,\n  ELEMENT_H3,\n  ELEMENT_H4,\n  ELEMENT_H5,\n  ELEMENT_H6,\n} from '../../heading';\nimport { ELEMENT_TOC, type Heading, type TocPlugin } from '../../toc';\nimport { isHeading } from '../isHeading';\n\nexport const headingDepth: Record<string, number> = {\n  [ELEMENT_H1]: 1,\n  [ELEMENT_H2]: 2,\n  [ELEMENT_H3]: 3,\n  [ELEMENT_H4]: 4,\n  [ELEMENT_H5]: 5,\n  [ELEMENT_H6]: 6,\n};\n\nexport const getHeadingList = <V extends Value = Value>(\n  editor: PlateEditor<V>\n) => {\n  const options = getPluginOptions<TocPlugin, V>(editor, ELEMENT_TOC);\n\n  if (options.queryHeading) {\n    return options.queryHeading<V>(editor);\n  }\n\n  const headingList: Heading[] = [];\n\n  const values = getNodeEntries(editor, {\n    at: [],\n    match: (n) => isHeading(n),\n  });\n\n  if (!values) return [];\n\n  Array.from(values, ([node, path]) => {\n    const { type } = node as TElement;\n    const title = getNodeString(node);\n    const depth = headingDepth[type];\n    const id = node.id;\n    title && headingList.push({ depth, id, path, title, type });\n  });\n\n  return headingList;\n};\n","'use client';\n\nimport React from 'react';\n\nimport { addSelectedRow, useEditorRef } from '@udecode/plate-common';\n\nimport type { UseContentController } from '../types';\n\nimport { heightToTop } from '../../utils';\nimport { useContentObserver } from './useContentObserver';\n\nexport const useContentController = ({\n  containerRef,\n  isObserve,\n  rootMargin,\n  topOffset,\n}: UseContentController) => {\n  const editor = useEditorRef();\n  const [editorContentRef, setEditorContentRef] = React.useState(containerRef);\n\n  const isScrollRef = React.useRef(false);\n\n  const isScroll =\n    (editorContentRef.current?.scrollHeight || 0) >\n    (editorContentRef.current?.clientHeight || 0);\n\n  isScrollRef.current = isScroll;\n\n  const scrollContainer = React.useMemo(() => {\n    if (typeof window !== 'object') return;\n\n    return isScroll ? editorContentRef.current : window;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isScroll]);\n\n  const [status, setStatus] = React.useState(0);\n\n  const { activeId } = useContentObserver({\n    editorContentRef,\n    isObserve,\n    isScroll,\n    rootMargin,\n    status,\n  });\n\n  const [activeContentId, setActiveContentId] = React.useState(activeId);\n\n  const onContentScroll = ({\n    behavior = 'instant',\n    el,\n    id,\n  }: {\n    behavior?: ScrollBehavior;\n    el: HTMLElement;\n    id: string;\n  }) => {\n    setActiveContentId(id);\n\n    if (isScrollRef.current) {\n      editorContentRef.current?.scrollTo({\n        behavior,\n        top: heightToTop(el, editorContentRef) - topOffset,\n      });\n    } else {\n      const top = heightToTop(el) - topOffset;\n      // Note: if behavior === smooth,scrolling the toc then click the title immediately will scroll to the wrong position.It should be a chrome bug.\n      window.scrollTo({ behavior, top });\n    }\n\n    addSelectedRow(editor, id);\n  };\n\n  React.useEffect(() => {\n    setEditorContentRef(containerRef);\n  }, [containerRef]);\n\n  React.useEffect(() => {\n    setActiveContentId(activeId);\n  }, [activeId]);\n\n  React.useEffect(() => {\n    if (!scrollContainer) return;\n\n    const scroll = () => {\n      if (isObserve) {\n        setStatus(Date.now());\n      }\n    };\n\n    scrollContainer.addEventListener('scroll', scroll);\n\n    return () => {\n      scrollContainer.removeEventListener('scroll', scroll);\n    };\n  }, [isObserve, scrollContainer]);\n\n  return { activeContentId, onContentScroll };\n};\n","import React from 'react';\n\nimport {\n  getNode,\n  toDOMNode,\n  useEditorRef,\n  useEditorSelector,\n} from '@udecode/plate-common';\n\nimport { getHeadingList } from '../../utils/internal/getHeadingList';\n\ninterface UseContentObserver {\n  editorContentRef: React.RefObject<HTMLElement>;\n  isObserve: boolean;\n  isScroll: boolean;\n  rootMargin: string;\n  status: number;\n}\n\nexport const useContentObserver = ({\n  editorContentRef,\n  isObserve,\n  isScroll,\n  rootMargin,\n  status,\n}: UseContentObserver) => {\n  const headingElementsRef = React.useRef<\n    Record<string, IntersectionObserverEntry>\n  >({});\n\n  const root = isScroll ? editorContentRef.current : undefined;\n  const editor = useEditorRef();\n  const headingList = useEditorSelector(getHeadingList, []);\n\n  const [activeId, setActiveId] = React.useState('');\n\n  React.useEffect(() => {\n    const callback = (headings: IntersectionObserverEntry[]) => {\n      if (!isObserve) return;\n\n      headingElementsRef.current = headings.reduce((map, headingElement) => {\n        map[headingElement.target.id] = headingElement;\n\n        return map;\n      }, headingElementsRef.current);\n\n      const visibleHeadings: string[] = [];\n\n      Object.keys(headingElementsRef.current).forEach((key) => {\n        const headingElement = headingElementsRef.current[key];\n\n        if (headingElement.isIntersecting) visibleHeadings.push(key);\n      });\n      const lastKey = Object.keys(headingElementsRef.current).pop()!;\n      visibleHeadings.length > 0 && setActiveId(visibleHeadings[0] || lastKey);\n      headingElementsRef.current = {};\n    };\n    const observer = new IntersectionObserver(callback, {\n      root: root,\n      rootMargin: rootMargin,\n    });\n\n    headingList.forEach((item) => {\n      const { path } = item;\n\n      const node = getNode(editor, path);\n\n      if (!node) return;\n\n      const element = toDOMNode(editor, node);\n\n      return element && observer.observe(element);\n    });\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [headingList, isObserve, editor, root, rootMargin, status]);\n\n  return { activeId };\n};\n","import React from 'react';\n\nimport { useTocObserver } from './useTocObserver';\n\ninterface UseTocController {\n  activeId: string;\n  isObserve: boolean;\n  showHeader: boolean;\n  tocRef: React.RefObject<HTMLElement>;\n}\n\nexport const useTocController = ({\n  activeId,\n  isObserve,\n  showHeader,\n  tocRef,\n}: UseTocController) => {\n  const [activeTocId, setActiveTocId] = React.useState('');\n  const { offset, visible } = useTocObserver({\n    activeId: activeTocId,\n    isObserve,\n    showHeader,\n    tocRef,\n  });\n\n  React.useEffect(() => {\n    if (!visible) {\n      const tocItemWrapper = tocRef.current?.querySelector('#toc_wrap');\n      const top = (tocItemWrapper?.scrollTop as any) + offset;\n\n      tocItemWrapper?.scrollTo({ behavior: 'instant', top: top });\n    }\n  }, [visible, offset, tocRef]);\n\n  React.useEffect(() => {\n    setActiveTocId(activeId);\n  }, [activeId]);\n};\n","import React from 'react';\n\ninterface UseTocObserver {\n  activeId: string;\n  isObserve: boolean;\n  showHeader: boolean;\n  tocRef: React.RefObject<HTMLElement>;\n}\n\nexport const useTocObserver = ({\n  activeId,\n  isObserve,\n  tocRef,\n}: UseTocObserver) => {\n  const root = tocRef.current;\n\n  const [visible, setVisible] = React.useState<boolean>(true);\n  const [offset, setOffset] = React.useState<number>(0);\n\n  const updateOffset = React.useCallback(\n    (entries: IntersectionObserverEntry[]) => {\n      if (!isObserve) return;\n\n      const [entry] = entries;\n      const { boundingClientRect, intersectionRatio, rootBounds } = entry;\n\n      if (!rootBounds) return;\n\n      const halfHeight = (root?.getBoundingClientRect().height || 0) / 2;\n      const isAbove = boundingClientRect.top < rootBounds.top;\n      const isBelow = boundingClientRect.bottom > rootBounds.bottom;\n      const isVisible = intersectionRatio === 1;\n\n      setVisible(isVisible);\n\n      if (!isVisible) {\n        const offset = isAbove\n          ? boundingClientRect.top - rootBounds!.top! - halfHeight\n          : isBelow\n            ? boundingClientRect.bottom - rootBounds!.bottom! + halfHeight\n            : 0;\n\n        setOffset(offset);\n      }\n    },\n    [isObserve, root]\n  );\n\n  React.useEffect(() => {\n    const observer = new IntersectionObserver(updateOffset, {\n      root: root,\n    });\n\n    const element = root?.querySelectorAll('#toc_item_active')[0];\n\n    if (element) observer.observe(element);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [root, activeId, updateOffset]);\n\n  return { offset, visible };\n};\n","import React from 'react';\n\nimport {\n  getNode,\n  toDOMNode,\n  useEditorRef,\n  useEditorSelector,\n} from '@udecode/plate-common';\n\nimport type { Heading, TocSideBarProps } from '../types';\n\nimport { useContentController, useTocController } from '.';\nimport { checkIn } from '../../utils';\nimport { getHeadingList } from '../../utils/internal/getHeadingList';\n\nexport const useTocSideBarState = ({\n  containerRef,\n  onOpenChange,\n  open = true,\n  rootMargin = '0px 0px 0px 0px',\n  showHeader = true,\n  style,\n  topOffset = 0,\n}: TocSideBarProps) => {\n  const editor = useEditorRef();\n  const headingList = useEditorSelector(getHeadingList, []);\n\n  const tocRef = React.useRef<HTMLElement>(null);\n\n  const [mouseInToc, setMouseInToc] = React.useState(false);\n\n  const [isObserve, setIsObserve] = React.useState(open);\n\n  const { activeContentId, onContentScroll } = useContentController({\n    containerRef,\n    isObserve,\n    rootMargin,\n    topOffset,\n  });\n\n  useTocController({\n    activeId: activeContentId,\n    isObserve,\n    showHeader,\n    tocRef,\n  });\n\n  return {\n    activeContentId,\n    editor,\n    headingList,\n    mouseInToc,\n    onContentScroll,\n    onOpenChange,\n    open,\n    setIsObserve,\n    setMouseInToc,\n    showHeader,\n    style,\n    tocRef,\n  };\n};\n\nexport const useTocSideBar = ({\n  editor,\n  mouseInToc,\n  onContentScroll,\n  open,\n  setIsObserve,\n  setMouseInToc,\n  tocRef,\n}: ReturnType<typeof useTocSideBarState>) => {\n  React.useEffect(() => {\n    if (mouseInToc) {\n      setIsObserve(false);\n    } else {\n      setIsObserve(true);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [mouseInToc]);\n\n  const onContentClick = React.useCallback(\n    (\n      e: React.MouseEvent<HTMLElement, globalThis.MouseEvent>,\n      item: Heading,\n      behavior?: ScrollBehavior\n    ) => {\n      e.preventDefault();\n      const { id, path } = item;\n      const node = getNode(editor, path);\n\n      if (!node) return;\n\n      const el = toDOMNode(editor, node);\n\n      if (!el) return;\n\n      onContentScroll({ behavior, el, id });\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  return {\n    navProps: {\n      onMouseEnter: () => {\n        !mouseInToc && open && setMouseInToc(true);\n      },\n      onMouseLeave: (\n        e: React.MouseEvent<HTMLElement, globalThis.MouseEvent>\n      ) => {\n        if (open) {\n          const isIn = checkIn(e);\n          isIn !== mouseInToc && setMouseInToc(isIn);\n        }\n      },\n      ref: tocRef,\n    },\n    onContentClick,\n  };\n};\n","import {\n  type InsertNodesOptions,\n  type PlateEditor,\n  type TElement,\n  type Value,\n  insertNodes,\n} from '@udecode/plate-common';\n\nimport { ELEMENT_TOC } from '../createTocPlugin';\n\nexport const insertToc = <V extends Value>(\n  editor: PlateEditor<V>,\n  options?: InsertNodesOptions<V>\n) => {\n  insertNodes<TElement>(\n    editor,\n    {\n      children: [{ text: '' }],\n      type: ELEMENT_TOC,\n    },\n    options as any\n  );\n};\n"],"mappings":"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","names":["createPluginFactory","React","addSelectedRow","useEditorRef","React","getNode","toDOMNode","useEditorRef","useEditorSelector","React","useEditorRef","useEditorSelector","getNode","toDOMNode","useEditorRef","React","_a","addSelectedRow","React","React","offset","React","React","getNode","toDOMNode","useEditorRef","useEditorSelector","useEditorRef","useEditorSelector","React","getNode","toDOMNode"]}