System.register([],function(z){"use strict";return{execute:function(){z("atom",R);let P=0;function R(t,r){const o=`atom${++P}`,d={toString(){return o}};return typeof t=="function"?d.read=t:(d.init=t,d.read=T,d.write=U),r&&(d.write=r),d}function T(t){return t(this)}function U(t,r,o){return r(this,typeof o=="function"?o(t(this)):o)}const q=(t,r)=>t.unstable_is?t.unstable_is(r):r===t,B=t=>"init"in t,F=t=>!!t.write,b=new WeakMap,A=t=>{var r;return C(t)&&!((r=b.get(t))!=null&&r[1])},V=(t,r)=>{const o=b.get(t);o&&(o[1]=!0,o[0].forEach(d=>d(r)))},$=t=>{if(b.has(t))return;const r=[new Set,!1];b.set(t,r);const o=()=>{r[1]=!0};t.then(o,o),t.onCancel=d=>{r[0].add(d)}},C=t=>typeof(t==null?void 0:t.then)=="function",G=t=>"v"in t||"e"in t,k=t=>{if("e"in t)throw t.e;return t.v},H=(t,r,o)=>{o.p.has(t)||(o.p.add(t),r.then(()=>{o.p.delete(t)},()=>{o.p.delete(t)}))},I=(t,r,o,d,v)=>{var m;o.d.set(d,v.n),A(o.v)&&H(r,o.v,v),(m=v.m)==null||m.t.add(r),t&&x(t,d,r)},g=()=>[new Map,new Map,new Set],J=(t,r,o)=>{t[0].has(r)||t[0].set(r,new Set),t[1].set(r,o)},x=(t,r,o)=>{const d=t[0].get(r);d&&d.add(o)},Q=(t,r)=>t[0].get(r),K=(t,r)=>{t[2].add(r)},p=t=>{let r,o=!1;const d=v=>{try{v()}catch(m){o||(r=m,o=!0)}};for(;t[1].size||t[2].size;){t[0].clear();const v=new Set(t[1].values());t[1].clear();const m=new Set(t[2]);t[2].clear(),v.forEach(D=>{var E;return(E=D.m)==null?void 0:E.l.forEach(d)}),m.forEach(d)}if(o)throw r},L=(...[t,r,o,d])=>{const v=(c,e,n)=>{const u="v"in e,l=e.v,i=A(e.v)?e.v:null;if(C(n)){$(n);for(const s of e.d.keys())H(c,n,t(s));e.v=n,delete e.e}else e.v=n,delete e.e;(!u||!Object.is(l,e.v))&&(++e.n,i&&V(i,n))},m=(c,e,n)=>{var u;const l=t(e);if(G(l)&&(l.m&&!(n!=null&&n.has(e))||Array.from(l.d).every(([f,y])=>m(c,f,n).n===y)))return l;l.d.clear();let i=!0;const s=f=>{if(q(e,f)){const S=t(f);if(!G(S))if(B(f))v(f,S,f.init);else throw new Error("no atom init");return k(S)}const y=m(c,f,n);try{return k(y)}finally{if(i)I(c,e,l,f,y);else{const S=g();I(S,e,l,f,y),M(S,e,l),p(S)}}};let a,h;const w={get signal(){return a||(a=new AbortController),a.signal},get setSelf(){return!h&&F(e)&&(h=(...f)=>{if(!i)return N(e,...f)}),h}};try{const f=r(e,s,w);if(v(e,l,f),C(f)){(u=f.onCancel)==null||u.call(f,()=>a==null?void 0:a.abort());const y=()=>{if(l.m){const S=g();M(S,e,l),p(S)}};f.then(y,y)}return l}catch(f){return delete l.v,l.e=f,++l.n,l}finally{i=!1}},D=c=>k(m(void 0,c)),E=(c,e,n)=>{var u,l;const i=new Map;for(const s of((u=n.m)==null?void 0:u.t)||[]){const a=t(s);a.m&&i.set(s,a)}for(const s of n.p)i.set(s,t(s));return(l=Q(c,e))==null||l.forEach(s=>{i.set(s,t(s))}),i};function Y(c,e,n){const u=[],l=new Set,i=new Set,s=[[e,n]];for(;s.length>0;){const[a,h]=s[s.length-1];if(i.has(a)){s.pop();continue}if(l.has(a)){u.push([a,h,h.n]),i.add(a),s.pop();continue}l.add(a);for(const[w,f]of E(c,a,h))a!==w&&!l.has(w)&&s.push([w,f])}return[u,i]}const Z=(c,e,n)=>{const[u,l]=Y(c,e,n),i=new Set([e]);for(let s=u.length-1;s>=0;--s){const[a,h,w]=u[s];let f=!1;for(const y of h.d.keys())if(y!==a&&i.has(y)){f=!0;break}f&&(m(c,a,l),M(c,a,h),w!==h.n&&(J(c,a,h),i.add(a))),l.delete(a)}},W=(c,e,...n)=>{let u=!0;const l=s=>k(m(c,s)),i=(s,...a)=>{const h=t(s);try{if(q(e,s)){if(!B(s))throw new Error("atom not writable");const w=h.n,f=a[0];v(s,h,f),M(c,s,h),w!==h.n&&(J(c,s,h),Z(c,s,h));return}else return W(c,s,...a)}finally{u||p(c)}};try{return o(e,l,i,...n)}finally{u=!1}},N=(c,...e)=>{const n=g();try{return W(n,c,...e)}finally{p(n)}},M=(c,e,n)=>{if(n.m&&!A(n.v)){for(const u of n.d.keys())n.m.d.has(u)||(j(c,u,t(u)).t.add(e),n.m.d.add(u));for(const u of n.m.d||[])if(!n.d.has(u)){n.m.d.delete(u);const l=O(c,u,t(u));l==null||l.t.delete(e)}}},j=(c,e,n)=>{if(!n.m){m(c,e);for(const u of n.d.keys())j(c,u,t(u)).t.add(e);if(n.m={l:new Set,d:new Set(n.d.keys()),t:new Set},F(e)){const u=n.m;let l;const i=(s,a)=>{let h=!0;l=(...w)=>{try{return W(s,e,...w)}finally{h||p(s)}};try{return a()}finally{h=!1}};K(c,()=>{const s=i(c,()=>d(e,(...a)=>l(...a)));s&&(u.u=a=>i(a,s))})}}return n.m},O=(c,e,n)=>{if(n.m&&!n.m.l.size&&!Array.from(n.m.t).some(u=>{var l;return(l=t(u).m)==null?void 0:l.d.has(e)})){const u=n.m.u;u&&K(c,()=>u(c)),delete n.m;for(const l of n.d.keys()){const i=O(c,l,t(l));i==null||i.t.delete(e)}return}return n.m};return{get:D,set:N,sub:(c,e)=>{const n=g(),u=t(c),l=j(n,c,u).l;return l.add(e),p(n),()=>{l.delete(e);const i=g();O(i,c,u),p(i)}},unstable_derive:c=>L(...c(t,r,o,d))}},X=z("createStore",()=>{const t=new WeakMap;return L(r=>{let o=t.get(r);return o||(o={d:new Map,p:new Set,n:0},t.set(r,o)),o},(r,...o)=>r.read(...o),(r,...o)=>r.write(...o),(r,...o)=>{var d;return(d=r.onMount)==null?void 0:d.call(r,...o)})});let _;const tt=z("getDefaultStore",()=>(_||(_=X()),_))}}});
